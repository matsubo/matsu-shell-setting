-- ~/.config/nvim/lua/config/keymaps.lua

local map = vim.keymap.set

-- -------------------------------------------------------------------------
-- General
-- -------------------------------------------------------------------------

-- 検索ハイライトを Esc 連打で消す
-- (:nohlsearch を打つ手間を省きます)
map("n", "<Esc>", "<cmd>nohlsearch<CR>")

-- ファイル保存のショートカット (Ctrl+s)
-- Macのターミナル設定で Ctrl+s がロックになっていないか注意が必要ですが、あると便利です
map({ "i", "x", "n", "s" }, "<C-s>", "<cmd>w<cr><esc>", { desc = "Save File" })

-- -------------------------------------------------------------------------
-- Window Navigation (ウィンドウ移動)
-- -------------------------------------------------------------------------
-- Ctrl + h/j/k/l でウィンドウ間を移動
-- (C-w h 等の代わり。tmuxやVSCodeの感覚に近いです)
map("n", "<C-h>", "<C-w>h", { desc = "Go to Left Window", remap = true })
map("n", "<C-j>", "<C-w>j", { desc = "Go to Lower Window", remap = true })
map("n", "<C-k>", "<C-w>k", { desc = "Go to Upper Window", remap = true })
map("n", "<C-l>", "<C-w>l", { desc = "Go to Right Window", remap = true })

-- -------------------------------------------------------------------------
-- Visual Mode
-- -------------------------------------------------------------------------

-- インデント操作後に選択範囲を維持する
-- (Vimのデフォルトだとインデント後に選択が解除されてしまうため)
map("v", "<", "<gv")
map("v", ">", ">gv")

-- -------------------------------------------------------------------------
-- Terminal
-- -------------------------------------------------------------------------
-- ターミナルモードから抜けるためのマップ (Esc Esc)
map("t", "<Esc><Esc>", "<C-\\><C-n>", { desc = "Exit terminal mode" })
