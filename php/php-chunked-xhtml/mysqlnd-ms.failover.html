<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Failover</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqlnd-ms.transaction.html">Transaction handling</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqlnd-ms.loadbalancing.html">Load balancing</a></div>
 <div class="up"><a href="mysqlnd-ms.concepts.html">Concepts</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mysqlnd-ms.failover" class="section">
  <h2 class="title">Failover</h2>
  <p class="para">
   Connection failover handling is left to the user. The application is responsible
   for checking return values of the database functions it calls and reacting
   to possible errors. If, for example, the plugin recognizes a query as a read-only
   query to be sent to the slave servers and the slave server selected by the
   plugin is not available, the plugin will raise an error after not executing
   the statement.
  </p>
  <p class="para">
   It is up to
   the application to handle the error and, if need be, re-issue the query to
   trigger selection of another slave server for statement execution. The plugin
   will make no attempts to failover automatically because the plugin
   cannot ensure that an automatic failover will not change the state of
   the connection. For example, the application may have issued a query
   which depends on SQL user variables which are bound to a specific connection.
   Such a query might return wrong results if the plugin would switch the 
   connection implicitly as part of automatic failover. To ensure correct
   results the application must take care of the failover and rebuild
   the required connection state. Therefore, by default, no automatic failover
   is done by the plugin.
  </p>
  <p class="para">
    An user who does not change the connection state after opening a connection 
    may activate automatic master failover. 
  </p>
  <p class="para">
    The failover policy is configured in the plugins configuration file by help
    of the 
    <i><a href="mysqlnd-ms.plugin-ini.html#ini.mysqlnd-ms-plugin-config.failover" class="link">failover</a></i>
    configuration directive.
  </p>
 </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mysqlnd-ms.transaction.html">Transaction handling</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mysqlnd-ms.loadbalancing.html">Load balancing</a></div>
 <div class="up"><a href="mysqlnd-ms.concepts.html">Concepts</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
